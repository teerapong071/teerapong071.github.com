<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>08-js-Layout By Teerapong</title>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <!-- Blocking JavaScript -->

  <script>
    $(function () {
      $("head").load("08-head.html");
      $("#hd").load("08-header.html");
      $("#ft").load("08-footer.html");
    });
  </script>

  <script>
    let row
    let cell
    let array_fname = []
    let array_phone = []
    let array_email = []

    if (localStorage.getItem('fname') != null &&
      localStorage.getItem('phone') != null &&
      localStorage.getItem('email') != null) {
      array_fname = JSON.parse(localStorage.getItem('fname'))
      array_phone = JSON.parse(localStorage.getItem('phone'))
      array_email = JSON.parse(localStorage.getItem('email'))


    }

  </script>



</head>

<body onload="load_data()">
  <section class="hero is-light is-fullheight">
    <!-- Hero head: will stick at the top -->
    <div id="hd"></div>

    <!-- Hero content: will be in the middle -->
    <div class="hero-body has-background-grey-light">
      <div class="container has-text-centered">
        <div class="columns is-centered mx-auto">
          <div class="column is-half">
            <div class="card has-background-success-light	">
              <div class="card-content">
                <div class="content">
                  <button class="button is-success mb-3" onclick="insert_data()">Insert data</button>
                  <table id="td1" class="table is-bordered is-striped is-hoverable">
                    <thead>
                      <tr>
                        <th style="width: 300px;">FNAME</th>
                        <th style="width: 300px;">PHONE</th>
                        <th style="width: 300px;">EMAIL</th>
                        <th></th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>



                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Hero footer: will stick at the bottom -->
    <div id="ft"></div>

  </section>

  <script>

    let td1 = document.getElementById('td1').getElementsByTagName('tbody')[0]
    function load_data() {
      for (let i = 0; i < array_fname.length; i++) {
        // console.log(array_fname[i])
        // console.log(array_phone[i])
        // console.log(array_email[i])
        row = td1.insertRow()
        cell = row.insertCell()
        cell.innerHTML = array_fname[i]
        cell = row.insertCell()
        cell.innerHTML = array_phone[i]
        cell = row.insertCell()
        cell.innerHTML = array_email[i]
        cell = row.insertCell()
        cell.innerHTML = '<button class="button is-warning" >Edit</button>'
        cell = row.insertCell()
        cell.innerHTML = '<button class="button is-danger">Delete</button>'
      }
    }

    function insert_data() {
      row = td1.insertRow()
      cell = row.insertCell()
      cell.innerHTML = '<input class="input" type="text" placeholder="input Full Name" id="fname">'
      cell = row.insertCell()
      cell.innerHTML = '<input class="input is-success" type="text" placeholder="input Phone Number" id="phone">'
      cell = row.insertCell()
      cell.innerHTML = '<input class="input is-danger" type="email" placeholder="Email input" id="email">'
      cell = row.insertCell()
      cell.innerHTML = '<button class="button has-background-primary" onclick="save_data()" >Save</button>'
      cell = row.insertCell()
      cell.innerHTML = '<button class="button is-link" onclick="cancel_insert()">Cancel</button>'


    }

    function cancel_insert() {
      row = td1.deleteRow(td1.rows.length - 1)


    }

    function save_data() {
      if (document.getElementById('fname').value != '' &
        document.getElementById('phone').value != '' &
        document.getElementById('email').value != '') {


        array_fname.push(document.getElementById('fname').value)
        array_phone.push(document.getElementById('phone').value)
        array_email.push(document.getElementById('email').value)

        localStorage.setItem('fname', JSON.stringify(array_fname))
        localStorage.setItem('phone', JSON.stringify(array_phone))
        localStorage.setItem('email', JSON.stringify(array_email))

        document.getElementById('fname').value = ''
        document.getElementById('phone').value = ''
        document.getElementById('email').value = ''

        td1.innerHTML = ''

        load_data()

      } else {
        window.alert('ใส่ข้อมูลให้ครบนะครับไม่งั้นมึงตาย')
      }

    }


  </script>

</body>

</html>